<div
  class="page w-full flex flex-col items-center bg-white dark:bg-gray-100 -z-50 space-y-4"
>
  <!-- HEADER -->
  <div
    id="page-header"
    class="relative w-full h-screen items-center justify-center flex flex-col text-white"
  >
    <img
      id="page-cover"
      class="absolute inset-0 w-full h-full object-cover z-10"
      alt="Capa"
    />
    <div
      class="grid grid-cols-12 gap-x-4 min-w-page max-w-page w-full my-auto z-20"
    >
      <div class="col-end-11 col-start-3 space-y-4">
        <div class="relative h-40 px-6 flex flex-col justify-between font-bold">
          <div
            class="absolute inset-y-0 left-0 w-2 bg-gradient-to-b from-primary-900 via-primary-overlay-40 to-primary-overlay-0"
          ></div>
          <div>
            <h2 class="font-normal text-sm">Curso de Aperfeiçoamento</h2>
            <h2 class="text-base uppercase">
              Programação para Blockchain: Contratos Inteligentes
            </h2>
          </div>

          <div class="flex text-3xl items-end my-auto">
            <h1 id="page-number" class="text-5xl text-primary-900">12</h1>
            <h1 id="page-title" class="ml-6">
              Construindo um contrato inteligente
            </h1>
          </div>
        </div>

        <div class="mt-24">
          <h2 class="font-bold text-lg mb-3">Objetivo de Aprendizagem</h2>
          <h2 id="page-description" class="w-1/2 font-normal text-base flex">
            Estruturar contratos inteligente na linguagem Solidity
          </h2>
        </div>

        <div class="mt-20 flex">
          <button
            class="h-12 rounded-sm border z-10 font-semibold px-14 disabled:cursor-not-allowed border-primary-900 text-primary-900 bg-gray-200"
            onclick="handleStart"
          >
            Iniciar unidade
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="flex flex-col w-full items-center">
    <div class="grid grid-cols-12 gap-x-4 min-w-page max-w-page w-full z-20">
      <!-- VideoBorderFrame Problematizando -->
      <div
        class="relative col-start-1 col-end-13 grid grid-cols-12 gap-x-4 mt-14 mb-8"
      >
        <div
          class="absolute inset-0 rounded-lg border-2 mx-10 border-orange-500"
        >
          <div
            class="flex items-center justify-center w-1/2 bg-white dark:bg-gray-100 absolute top-0 video-border-frame-top left-1/2"
          >
            <div class="flex items-center justify-center">
              <img src="images/icons/problem.png" alt="ícone problematizando" />
            </div>
            <span
              class="font-bold text-2xl text-primary-400 dark:text-gray-900"
            >
              Problematizando
            </span>
          </div>
          <div
            class="w-1/2 h-10 bg-white dark:bg-gray-100 absolute bottom-0 video-border-frame-bottom left-1/2"
          ></div>
        </div>

        <div class="col-end-12 col-start-2 space-y-4">
          <div class="relative pb-56.25 my-12">
            <iframe
              class="absolute w-full h-full top-0 left-0"
              src="https://youtube.com/embed/iYcsiTTk5Iw"
              title="YouTube video player"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen
            >
            </iframe>
          </div>
        </div>
      </div>
      <!-- /VideoBorderFrame Problematizando -->
    </div>
  </div>

  <!-- Section title primary -->
  <div class="w-full">
    <div
      class="flex items-center justify-center w-full h-16 section-title-content-primary"
    >
      <div class="grid grid-cols-12 gap-x-4 min-w-page max-w-page w-full z-20">
        <div class="col-end-11 col-start-3 space-y-4">
          <h1 class="text-primary-400 text-2xl font-bold" id="1-0">
            Construindo um contrato inteligente
          </h1>
        </div>
      </div>
    </div>
  </div>

  <!-- Section -->
  <div class="flex flex-col w-full items-center">
    <div class="grid grid-cols-12 gap-x-4 min-w-page max-w-page w-full z-20">
      <!-- GridCol marginInCols = 2 -->
      <div class="col-end-11 col-start-3 space-y-4">
        <p>
          Você vai acompanhar a implementação de um contrato inteligente para
          controle de matrícula de estudantes no curso “Programação para
          contratos inteligentes do SENAI” utilizando a blockchain Ethereum.
          Abaixo segue o contexto que será utilizado para a programação.
        </p>
      </div>
      <!-- VideoFrame -->
      <div class="col-end-12 col-start-2 space-y-4">
        <div class="relative pb-56.25 my-12">
          <iframe
            class="absolute w-full h-full top-0 left-0"
            src="https://youtube.com/embed/0hMKwADS0ow"
            title="YouTube video player"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
          >
          </iframe>
        </div>
      </div>

      <!-- GridCol marginInCols = 2 -->
      <div class="col-end-11 col-start-3 space-y-4">
        <p>
          Durante a implementação você irá explorar os conceitos da linguagem de
          programação Solidity. Uma sugestão é que coloque a mão na massa!
          Construa seu próprio contrato inteligente em paralelo com seus
          estudos. Você só se tornará um bom programador com muito treinamento.
          Copie o exemplo e tente fazer suas próprias alterações. Desafie-se!
        </p>

        <h2
          class="font-bold text-primary-500 dark:text-primary-900 text-xl ms-12"
          id="1-1"
        >
          Criação do contrato
        </h2>

        <p>
          Agora, você vai conhecer alguns tipos de herança oferecidas pelo
          Solidity.
        </p>

        <!-- Image content -->
        <div
          class="gallery flex flex-col items-center"
          ue="UE12"
          index="1"
        ></div>
        <!-- / Image content -->

        <p>
          Considerando que no nosso contexto existe uma entidade Estudante, a
          primeira decisão é: como definir, em termos de programação, esse
          estudante? Uma alternativa bastante eficiente é usar uma estrutura
          chamada struct.
        </p>

        <p>
          Agora, vamos pensar nas características do Estudante que serão
          importantes para nosso contrato. Neste exemplo, foram escolhidos o
          nome do estudante, a idade e se ele possui os pré-requisitos para a
          matrícula. Na figura a seguir temos a definição do Estudante com seus
          parâmetros nomeEstudante do tipo string (linha 8), idade do tipo uint
          (linha 9), preRequisito do tipo bool (linha 10) (preRequisito terá
          valor TRUE, se o estudante tiver os pré requisitos e FALSE, caso
          contrário).. Em um ambiente real, muitas outras características dos
          estudantes deveriam ser consideradas, mas para simplificar o exemplo,
          foram utilizados apenas essas três.
        </p>

        <!-- Image content -->
        <div
          class="gallery flex flex-col items-center"
          ue="UE12"
          index="2"
        ></div>
        <!-- / Image content -->

        <div id="UE12Q1" class="space-y-2 pt-8 pb-8"></div>

        <p>
          Definimos uma forma de representar os estudantes, então podem surgir
          algumas perguntas: Como inscrever os alunos do curso? Como gerenciar
          as inscrições dos estudantes? Como garantir que um estudante se
          inscreva uma única vez?
        </p>

        <p>
          Para auxiliar na solução desses problemas, uma estrutura que terá
          muita utilidade é o mapping. Vamos chamar nosso mapping de
          _estudantesMatriculados e ele será utilizado para mapear um Estudante
          matriculado no endereço usado na chamada do contrato, como vemos na
          figura a seguir.
        </p>

        <!-- Image content -->
        <div
          class="gallery flex flex-col items-center"
          ue="UE12"
          index="2.2"
        ></div>
        <!-- / Image content -->

        <p>
          Ele recebe um endereço como parâmetro e retorna um Estudante. A
          visibilidade definida foi private, pois será utilizado apenas por este
          contrato. O exemplo a seguir mostra a implementação.
        </p>

        <!-- Image content -->
        <div
          class="gallery flex flex-col items-center"
          ue="UE12"
          index="3"
        ></div>
        <!-- / Image content -->

        <p>
          Vamos construir nossa primeira funcionalidade: uma função que retorna
          um Estudante a partir do endereço associado a ele.
        </p>

        <p>Como mostra a seguir:</p>

        <p>
          A seguir, analise a imagem sobre a definição da função que retorna o
          Estudante a partir da matrícula:
        </p>

        <!-- Image content -->
        <div
          class="gallery flex flex-col items-center"
          ue="UE12"
          index="4"
        ></div>
        <!-- / Image content -->

        <p>A implementação da figura 04 permite observar que:</p>

        <!-- List -->
        <ol
          class="font-regular text-lg text-gray-200 dark:text-gray-900 ms-8 list-disc"
        >
          <li>A função foi chamada de getEstudanteMatriculado.</li>
          <br />

          <li>
            Ela recebe como entrada um parâmetro do tipo address chamado
            _estudanteAddress. Esse é o endereço que mapeia para o estudante no
            mapping.
          </li>
          <br />

          <li>
            A visibilidade é definida como public, pois é necessário que a
            função seja acessada de qualquer lugar externamente.
          </li>
          <br />

          <li>
            É definida do tipo view, pois a função acessa dados, mas não os
            modifica.
          </li>
          <br />

          <li>
            O retorno é uma variável do tipo Estudante que será armazenada
            temporariamente na memória.
          </li>
          <br />

          <li>
            A implementação consiste em usar o parâmetro de entrada
            _estudanteAddress como chave no mapping _estudantesMatriculados para
            retornar o Estudante mapeado ao endereço.
          </li>
          <br />
        </ol>
        <!-- / List -->

        <p>
          Quando o endereço é passado como parâmetro para a função
          getEstudanteMatriculado, ela retorna um Estudante. Note que, mesmo que
          não exista um estudante associado ao endereço, ainda assim é retornado
          um Estudante, porém as variáveis terão os valores padrão definido para
          cada um de seu tipo. Neste caso, os valores seriam:
        </p>

        <!-- List -->
        <ol
          class="font-regular text-lg text-gray-200 dark:text-gray-900 ms-8 list-disc"
        >
          <li>
            nomeEstudante é do tipo string e tem como valor padrão uma string
            vazia “”,
          </li>
          <br />

          <li>idade é do tipo uint e recebe como valor padrão o zero.</li>
          <br />

          <li>
            preRequisito é do tipo booleano e o valor padrão estabelecido é
            false.
          </li>
        </ol>
        <!-- / List -->

        <p>
          Diante disso, você já deve estar pensando que será necessário
          implementar funções para validar o estado das variáveis.
        </p>
      </div>
      <!-- VideoFrame -->
      <div class="col-end-12 col-start-2 space-y-4">
        <div class="relative pb-56.25 my-12">
          <iframe
            class="absolute w-full h-full top-0 left-0"
            src="https://youtube.com/embed/kw13TftxTb0"
            title="YouTube video player"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
          >
          </iframe>
        </div>
      </div>

      <!-- GridCol marginInCols = 2 -->
      <div class="col-end-11 col-start-3 space-y-4">
        <div id="UE12Q2" class="space-y-2 pb-8"></div>

        <p>
          A próxima função tem como objetivo avaliar se o estudante é válido
          baseado nos valores do seu nome e idade. São pré-requisitos válidos os
          alunos que:
        </p>

        <!-- List -->
        <ol
          class="font-regular text-lg text-gray-200 dark:text-gray-900 ms-8 list-disc"
        >
          <li>Tenha o nomeEstudante não vazio;</li>
          <br />

          <li>Tenha idade maior que zero, e;</li>
          <br />

          <li>
            Tenha os preRequisito para o curso, ou seja, valor igual a true.
          </li>
        </ol>
        <!-- / List -->

        <p>
          Como pode-se observar na imagem a seguir, a função foi chamada
          ehEstudanteValido e recebe como parâmetro um Estudante. Assim como nos
          outros casos, a função é definida como private, pure e retorna um
          bool. Seu retorno é um AND das funções ehIdadeValida, ehNomeValido e
          do parâmetro preRequisito do struct Estudante, logo todos devem ter
          valor TRUE para que ehEstudanteValido retorne TRUE.
        </p>

        <!-- Image content -->
        <div
          class="gallery flex flex-col items-center"
          ue="UE12"
          index="5"
        ></div>
        <!-- / Image content -->

        <div id="UE12Q3" class="space-y-2 pt-8 pb-8"></div>

        <p>
          Agora que já é possível realizarmos as validações necessárias, podemos
          construir a função de matrícula do estudante. Na imagem a seguir,
          temos a estrutura geral da função. Ela é chamada de
          matricularEstudante e recebe como parâmetros: um string referente ao
          nome do estudante, um unint para a idade e um bool indicando a
          presença ou ausência do pré requisito.
        </p>

        <!-- Image content -->
        <div
          class="gallery flex flex-col items-center"
          ue="UE12"
          index="6"
        ></div>
        <!-- / Image content -->

        <p>
          Vamos implementar nossa função? O primeiro passo é realizar validação
          dos valores recebidos como parâmetro. Para esse fim, utilizamos o
          require. Com ele, é possível retornar uma mensagem para o usuário
          relacionado ao erro. A figura 09 a seguir mostra as seguinte
          validações:
        </p>

        <!-- List -->
        <ol
          class="font-regular text-lg text-gray-200 dark:text-gray-900 ms-8 list-disc"
        >
          <li>
            Na linha 35, é utilizada a função ehNomeValido que verifica se o
            nome é vazio. Caso o nome seja vazio, uma mensagem é retornada ao
            usuário.
          </li>
          <br />

          <li>
            Na linha 36, é verificada a validade da idade com a função
            ehIdadeValida. É verificado se a idade é maior que zero.
          </li>
          <br />

          <li>
            Na linha 37, é verificado se o estudante contém o preRequisito
            necessário para o curso.
          </li>
          <br />

          <li>
            Na linha 38, há uma verificação um pouco mais complexa. Primeiro, é
            buscado no mapping, o estudante correspondente ao endereço que
            iniciou a execução do contrato. Para isso, utiliza-se a função
            getEstudanteMatriculado(msg.sender). Depois disso, verifica-se a
            validade do aluno que retornou do mapping. Observe que a exclamação
            (!) inverte o valor retornado (Se for true, retorna false e vice
            versa).
          </li>
        </ol>
        <!-- / List -->

        <p>
          Para entender melhor, imagine o contexto que um estudante está
          tentando se matricular, por engano, pela segunda vez no curso. O
          estudante seria encontrado no mapping pela função
          getEstudandoMatriculado que o retornaria. Agora, esse estudante seria
          a entrada da função ehEstudanteValido que retornaria TRUE, já que o
          estudante passou pelo processo de validação na primeira vez que foi
          inserido ao mapping. O operador exclamação (!) inverte o resultado,
          fazendo o resultado ser FALSE. Assim, o usuário receberia a mensagem
          “Estudante já matriculado”.
        </p>

        <!-- Image content -->
        <div
          class="gallery flex flex-col items-center"
          ue="UE12"
          index="7"
        ></div>
        <!-- / Image content -->

        <p>
          Quando as quatro condições são válidas, declara-se uma variável do
          tipo Estudante, localizada na memória (Estudante é um tipo por
          referência e, neste caso, não precisa ser válido fora do escopo da
          função) Analise o código a seguir, na linha 41:
        </p>

        <!-- Image content -->
        <div
          class="gallery flex flex-col items-center"
          ue="UE12"
          index="8"
        ></div>
        <!-- / Image content -->

        <p>
          Logo após, atribui-se ao estudante os parâmetros recebidos na função,
          como mostra as linhas 42,43 e 44.
        </p>

        <p>
          Agora, tem-se um estudante criado com seus respectivos valores para
          nomeEstudante, idade e preRequisito. Uma prática de segurança é
          verificar se a variável criada, estudante, é válida. Essa verificação
          pode ser feita usando assert, segundo o código a seguir:
        </p>

        <!-- Image content -->
        <div
          class="gallery flex flex-col items-center"
          ue="UE12"
          index="9"
        ></div>
        <!-- / Image content -->

        <p>
          Passando por todas as validações, pode-se inserir no mapping o
          estudante associado ao endereço, obtido pelo variável global msg.
          Observe a seguir a inserção:
        </p>

        <!-- Image content -->
        <div
          class="gallery flex flex-col items-center"
          ue="UE12"
          index="10"
        ></div>
        <!-- / Image content -->

        <p>
          Para uma visão mais ampla da função, a seguir coloquei para você o
          código completo da implementação.
        </p>

        <!-- Image content -->
        <div
          class="gallery flex flex-col items-center"
          ue="UE12"
          index="11"
        ></div>
        <!-- / Image content -->

        <h2
          class="font-bold text-primary-500 dark:text-primary-900 text-xl ms-12"
          id="1-2"
        >
          Utilizando o contrato
        </h2>

        <p>
          Após a finalização da implementação, realiza-se a compilação do
          código.Se tudo tiver corrido de forma correta, o código deve ser
          compilado e o contrato estará pronto para ser implantado na
          blockchain. Neste caso, foi usada a IDE Remix e utilizou-se uma rede
          de teste Ethereum para realizar o deploy.
        </p>

        <p>
          Após o deploy, o Remix oferece a utilização das funções públicas como
          mostra a figura a seguir. Observe as funções matricularEstudante e
          getEstudante mostradas como botões. Ao lado dos botões, há campo de
          entradas, onde podem ser inseridos os parâmetros.
        </p>

        <!-- Image content -->
        <div
          class="gallery flex flex-col items-center"
          ue="UE12"
          index="12"
        ></div>
        <!-- / Image content -->

        <p>
          Para o teste do contrato, primeiro, será executada a função
          matriculaEstudante. Na figura a seguir, pode-se observar a inserção
          dos dados: Rafael, 18, true. Eles representam os parâmetros da função:
          nomeEstudante, idade e preRequisito, respectivamente.
        </p>

        <!-- Image content -->
        <div
          class="gallery flex flex-col items-center"
          ue="UE12"
          index="13"
        ></div>
        <!-- / Image content -->

        <p>
          A execução da função gera um transação na blockchain. No console do
          Remix, observa-se os detalhes da transação e na figura 16 pode-se
          observar algumas informações. Perceba o destaque de um dado
          interessante dessa transação: o endereço que a gerou. Lembre-se! No
          mapping, o estudante matriculado está associado ao endereço que chamou
          o contrato. Esse endereço pode ser encontrado em from.
        </p>

        <!-- Image content -->
        <div
          class="gallery flex flex-col items-center"
          ue="UE12"
          index="14"
        ></div>
        <!-- / Image content -->

        <p>
          Copiando o valor de endereço e utilizando como entrada na função
          getEstudante, obtém-se como retorno o estudante que foi matriculado.
        </p>

        <!-- Image content -->
        <div
          class="gallery flex flex-col items-center"
          ue="UE12"
          index="15"
        ></div>
        <!-- / Image content -->
      </div>
      <!-- VideoFrame -->
      <div class="col-end-12 col-start-2 space-y-4">
        <div class="relative pb-56.25 my-12">
          <iframe
            class="absolute w-full h-full top-0 left-0"
            src="https://youtube.com/embed/tnCLtQuOFqY"
            title="YouTube video player"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
          >
          </iframe>
        </div>
      </div>
    </div>
  </div>
  <!-- / Section -->

  <!-- Section title secondary -->
  <div class="w-full">
    <div
      class="flex items-center justify-center w-full h-16 section-title-content-secondary"
    >
      <div class="grid grid-cols-12 gap-x-4 min-w-page max-w-page w-full z-20">
        <div class="col-end-11 col-start-3 space-y-4">
          <h1 class="text-primary-400 text-2xl font-bold dark:text-white">
            Recapitulando
          </h1>
        </div>
      </div>
    </div>
  </div>

  <!-- Section -->
  <div class="flex flex-col w-full items-center">
    <div class="grid grid-cols-12 gap-x-4 min-w-page max-w-page w-full z-20">
      <!-- GridCol marginInCols = 2 -->
      <div class="col-end-11 col-start-3 space-y-4">
        <p>Nesta unidade, os principais conceitos que você estudou foram:</p>

        <!-- List -->
        <ol
          class="font-regular text-lg text-gray-200 dark:text-gray-900 ms-8 list-disc"
        >
          <li>
            O passo a passo da implementação de um contrato inteligente para
            controle de matrícula de estudantes no curso “Programação para
            contratos inteligentes do SENAI” utilizando a blockchain Ethereum.
          </li>
          <br />

          <li>
            O primeiro passo para iniciar o projeto é a criação do arquivo
            “ContratoCadastroEstudantes.sol”.
          </li>
          <br />

          <li>
            É utilizado um struct para definir um Estudante. A estrutura contém
            os parâmetros nomeEstudante do tipo string , idade do tipo int ,
            preRequisito do tipo bool. (Código na imagem02)
          </li>
          <br />

          <li>
            Um mapping chamado _estudantesMatriculados recebe como parâmetro um
            endereço - de onde foi feita a chamada do contrato - e retorna um
            Estudante.
          </li>
          <br />

          <li>
            Uma função chamada getEstudanteMatriculado foi implementada com o
            objetivo de retornar o Estudante a partir do endereço fornecido.
            Mesmo que não exista um estudante vinculado ao endereço, é retornada
            uma estrutura Estudante, mas com os valores padrão para os tipos das
            variáveis Ela possui visibilidade public e é do tipo view. (Código
            na figura 04).
          </li>
          <br />

          <li>
            São definidas funções para validar as variáveis da estrutura
            Estudante, são elas:
          </li>
          <li class="list-none">
            <!-- List -->
            <ol
              class="font-regular text-lg text-gray-200 dark:text-gray-900 ms-8 list-disc"
            >
              <li>ehIdadeValida(uint _idadeEstudante)</li>
              <li>ehNomeValido(string memory _nomeEstudante)</li>
              <br />
            </ol>
            <!-- / List -->
          </li>
          <li>
            Foi implementada uma função para verificar a validade do Estudante.
            Para isso, foi utilizado a comparação lógica && entre
            ehIdadeValidade, ehNomeValido e preRequisito.
          </li>
          <br />

          <li>
            Por fim, a principal função matricularEstudante foi criada. Ela
            recebe como parâmetros string nomeEstudante, uint idade e um
            booleando preReqquisito.
          </li>
          <br />
          <li class="list-none">
            <!-- List -->
            <ol
              class="font-regular text-lg text-gray-200 dark:text-gray-900 ms-8 list-disc"
            >
              <li>
                O primeiro passo da implementação é validar os dados utilizando
                require.
              </li>
              <br />
              <li>
                Logo após, um estudante é criado com os valores dos parâmetros.
              </li>
              <br />
              <li>Então,o estudante criado é validado.</li>
              <br />
              <li>
                E, finalmente, inserido no mapping (associado ao seu
                endereço)como um estudante matriculado.
              </li>
              <br />
              <br />
            </ol>
            <!-- / List -->
          </li>
        </ol>
        <!-- / List -->
      </div>
      <!-- / GridCol marginInCols = 2 -->

      <!-- VideoBorderFrame isSolution -->
      <div
        class="relative col-start-1 col-end-13 grid grid-cols-12 gap-x-4 mt-14 mb-8"
      >
        <div
          class="absolute inset-0 rounded-lg border-2 mx-10 border-primary-800"
        >
          <div
            class="flex items-center justify-center w-1/2 bg-white dark:bg-gray-100 absolute top-0 video-border-frame-top left-1/2"
          >
            <div class="flex items-center justify-center">
              <img
                src="images/icons/solution.png"
                alt="ícone problematizando"
              />
            </div>
            <span
              class="font-bold text-2xl text-primary-400 dark:text-gray-900"
            >
              Solução do problematizando
            </span>
          </div>
          <div
            class="w-1/2 h-10 bg-white dark:bg-gray-100 absolute bottom-0 video-border-frame-bottom left-1/2"
          ></div>
        </div>

        <div class="col-end-12 col-start-2 space-y-4">
          <div class="relative pb-56.25 my-12">
            <iframe
              class="absolute w-full h-full top-0 left-0"
              src="https://youtube.com/embed/Ga-_YXQcKjA"
              title="YouTube video player"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen
            >
            </iframe>
          </div>
        </div>
      </div>
      <!-- /VideoBorderFrame isSolution -->
    </div>
  </div>
  <!-- / Section -->
</div>
<script type="module" src="/scripts/questions/UE12.js"></script>